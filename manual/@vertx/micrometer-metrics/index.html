<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES for Eclipse Vert.x</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" type="image/png" href="/es4x/favicon.png">
    <link rel="stylesheet" type="text/css" href="/es4x/player/asciinema-player.css">
    <script src="/es4x/player/asciinema-player.js"></script>
    <meta name="description" content="A Modern JavaScript runtime for Eclipse Vert.x">
    <link rel="preload" href="/es4x/assets/css/0.styles.57be2129.css" as="style"><link rel="preload" href="/es4x/assets/js/app.837a6700.js" as="script"><link rel="preload" href="/es4x/assets/js/2.96613d0f.js" as="script"><link rel="preload" href="/es4x/assets/js/95.af24f6b1.js" as="script"><link rel="prefetch" href="/es4x/assets/js/10.25f493b2.js"><link rel="prefetch" href="/es4x/assets/js/100.cfb483ce.js"><link rel="prefetch" href="/es4x/assets/js/101.41f0f345.js"><link rel="prefetch" href="/es4x/assets/js/102.11159607.js"><link rel="prefetch" href="/es4x/assets/js/103.26a38f31.js"><link rel="prefetch" href="/es4x/assets/js/104.5d636807.js"><link rel="prefetch" href="/es4x/assets/js/105.ef333a30.js"><link rel="prefetch" href="/es4x/assets/js/106.9a8e6256.js"><link rel="prefetch" href="/es4x/assets/js/107.29eb69ad.js"><link rel="prefetch" href="/es4x/assets/js/108.98fcfd9a.js"><link rel="prefetch" href="/es4x/assets/js/109.d6080ff5.js"><link rel="prefetch" href="/es4x/assets/js/11.6250afa8.js"><link rel="prefetch" href="/es4x/assets/js/110.3dd0cba3.js"><link rel="prefetch" href="/es4x/assets/js/111.4090be57.js"><link rel="prefetch" href="/es4x/assets/js/112.9c319411.js"><link rel="prefetch" href="/es4x/assets/js/113.84433759.js"><link rel="prefetch" href="/es4x/assets/js/114.68cb87cc.js"><link rel="prefetch" href="/es4x/assets/js/115.65241419.js"><link rel="prefetch" href="/es4x/assets/js/116.72987dea.js"><link rel="prefetch" href="/es4x/assets/js/117.03106a2c.js"><link rel="prefetch" href="/es4x/assets/js/118.0ad98106.js"><link rel="prefetch" href="/es4x/assets/js/119.cb303101.js"><link rel="prefetch" href="/es4x/assets/js/12.31be7a28.js"><link rel="prefetch" href="/es4x/assets/js/120.e2ffbd45.js"><link rel="prefetch" href="/es4x/assets/js/121.197dd995.js"><link rel="prefetch" href="/es4x/assets/js/122.8b966b22.js"><link rel="prefetch" href="/es4x/assets/js/123.4586e425.js"><link rel="prefetch" href="/es4x/assets/js/124.8377618c.js"><link rel="prefetch" href="/es4x/assets/js/125.da368490.js"><link rel="prefetch" href="/es4x/assets/js/126.e0bbd98d.js"><link rel="prefetch" href="/es4x/assets/js/127.fc93d280.js"><link rel="prefetch" href="/es4x/assets/js/128.98e5a4cc.js"><link rel="prefetch" href="/es4x/assets/js/129.c7621804.js"><link rel="prefetch" href="/es4x/assets/js/13.3ba77560.js"><link rel="prefetch" href="/es4x/assets/js/130.5cd4d89d.js"><link rel="prefetch" href="/es4x/assets/js/131.ae0d85c1.js"><link rel="prefetch" href="/es4x/assets/js/132.e08c4610.js"><link rel="prefetch" href="/es4x/assets/js/133.c0606af1.js"><link rel="prefetch" href="/es4x/assets/js/134.6426c832.js"><link rel="prefetch" href="/es4x/assets/js/135.cfc1f0ec.js"><link rel="prefetch" href="/es4x/assets/js/136.a8b15a1b.js"><link rel="prefetch" href="/es4x/assets/js/137.35e8cd32.js"><link rel="prefetch" href="/es4x/assets/js/138.312a152f.js"><link rel="prefetch" href="/es4x/assets/js/139.e437bff1.js"><link rel="prefetch" href="/es4x/assets/js/14.72f2b0c1.js"><link rel="prefetch" href="/es4x/assets/js/140.8d09b641.js"><link rel="prefetch" href="/es4x/assets/js/141.52848e3f.js"><link rel="prefetch" href="/es4x/assets/js/142.39cf7674.js"><link rel="prefetch" href="/es4x/assets/js/143.7d902150.js"><link rel="prefetch" href="/es4x/assets/js/144.3e74a206.js"><link rel="prefetch" href="/es4x/assets/js/145.6a2886f8.js"><link rel="prefetch" href="/es4x/assets/js/146.244849e4.js"><link rel="prefetch" href="/es4x/assets/js/147.7f0c9791.js"><link rel="prefetch" href="/es4x/assets/js/148.ab94dede.js"><link rel="prefetch" href="/es4x/assets/js/149.a49458da.js"><link rel="prefetch" href="/es4x/assets/js/15.bd087613.js"><link rel="prefetch" href="/es4x/assets/js/150.eabb62e5.js"><link rel="prefetch" href="/es4x/assets/js/151.a6f046ed.js"><link rel="prefetch" href="/es4x/assets/js/152.78e21db3.js"><link rel="prefetch" href="/es4x/assets/js/153.eef01fd9.js"><link rel="prefetch" href="/es4x/assets/js/154.68000f3a.js"><link rel="prefetch" href="/es4x/assets/js/155.51583889.js"><link rel="prefetch" href="/es4x/assets/js/156.b598ecad.js"><link rel="prefetch" href="/es4x/assets/js/157.37bfe59b.js"><link rel="prefetch" href="/es4x/assets/js/158.14f16fe6.js"><link rel="prefetch" href="/es4x/assets/js/159.5019694d.js"><link rel="prefetch" href="/es4x/assets/js/16.a392a655.js"><link rel="prefetch" href="/es4x/assets/js/160.dfe7924a.js"><link rel="prefetch" href="/es4x/assets/js/161.acc5cf27.js"><link rel="prefetch" href="/es4x/assets/js/162.5c855be0.js"><link rel="prefetch" href="/es4x/assets/js/163.841834be.js"><link rel="prefetch" href="/es4x/assets/js/164.368aca3b.js"><link rel="prefetch" href="/es4x/assets/js/165.0c08e67b.js"><link rel="prefetch" href="/es4x/assets/js/166.361b2ec9.js"><link rel="prefetch" href="/es4x/assets/js/167.a45d61db.js"><link rel="prefetch" href="/es4x/assets/js/168.2f440f57.js"><link rel="prefetch" href="/es4x/assets/js/169.40f71d05.js"><link rel="prefetch" href="/es4x/assets/js/17.f58ddc3f.js"><link rel="prefetch" href="/es4x/assets/js/170.bfd53069.js"><link rel="prefetch" href="/es4x/assets/js/171.73de0958.js"><link rel="prefetch" href="/es4x/assets/js/172.c0640f4c.js"><link rel="prefetch" href="/es4x/assets/js/18.e2866c20.js"><link rel="prefetch" href="/es4x/assets/js/19.5895c9c4.js"><link rel="prefetch" href="/es4x/assets/js/20.bbfce85e.js"><link rel="prefetch" href="/es4x/assets/js/21.bfb22c95.js"><link rel="prefetch" href="/es4x/assets/js/22.bfe5d665.js"><link rel="prefetch" href="/es4x/assets/js/23.7db73d21.js"><link rel="prefetch" href="/es4x/assets/js/24.1e68764d.js"><link rel="prefetch" href="/es4x/assets/js/25.80677ca8.js"><link rel="prefetch" href="/es4x/assets/js/26.05452c59.js"><link rel="prefetch" href="/es4x/assets/js/27.9cb32590.js"><link rel="prefetch" href="/es4x/assets/js/28.08149c08.js"><link rel="prefetch" href="/es4x/assets/js/29.147441c7.js"><link rel="prefetch" href="/es4x/assets/js/3.4d2250de.js"><link rel="prefetch" href="/es4x/assets/js/30.5f95f2c8.js"><link rel="prefetch" href="/es4x/assets/js/31.7000a792.js"><link rel="prefetch" href="/es4x/assets/js/32.a454f02e.js"><link rel="prefetch" href="/es4x/assets/js/33.9072e3dc.js"><link rel="prefetch" href="/es4x/assets/js/34.2cd817f7.js"><link rel="prefetch" href="/es4x/assets/js/35.1499c4b4.js"><link rel="prefetch" href="/es4x/assets/js/36.53b6ddf9.js"><link rel="prefetch" href="/es4x/assets/js/37.1b440312.js"><link rel="prefetch" href="/es4x/assets/js/38.1caa3e15.js"><link rel="prefetch" href="/es4x/assets/js/39.ab25bad3.js"><link rel="prefetch" href="/es4x/assets/js/4.2410671b.js"><link rel="prefetch" href="/es4x/assets/js/40.13850330.js"><link rel="prefetch" href="/es4x/assets/js/41.1f30e160.js"><link rel="prefetch" href="/es4x/assets/js/42.f65b46db.js"><link rel="prefetch" href="/es4x/assets/js/43.86bd3898.js"><link rel="prefetch" href="/es4x/assets/js/44.25aede52.js"><link rel="prefetch" href="/es4x/assets/js/45.cee33b90.js"><link rel="prefetch" href="/es4x/assets/js/46.08c82be4.js"><link rel="prefetch" href="/es4x/assets/js/47.9263c242.js"><link rel="prefetch" href="/es4x/assets/js/48.4ef5e818.js"><link rel="prefetch" href="/es4x/assets/js/49.51ca886c.js"><link rel="prefetch" href="/es4x/assets/js/5.0b93e503.js"><link rel="prefetch" href="/es4x/assets/js/50.54a8010f.js"><link rel="prefetch" href="/es4x/assets/js/51.26142f55.js"><link rel="prefetch" href="/es4x/assets/js/52.b132a309.js"><link rel="prefetch" href="/es4x/assets/js/53.edc43f5a.js"><link rel="prefetch" href="/es4x/assets/js/54.6794cce1.js"><link rel="prefetch" href="/es4x/assets/js/55.dfdebce6.js"><link rel="prefetch" href="/es4x/assets/js/56.2b9f4603.js"><link rel="prefetch" href="/es4x/assets/js/57.c707ed5a.js"><link rel="prefetch" href="/es4x/assets/js/58.925a6f1c.js"><link rel="prefetch" href="/es4x/assets/js/59.de86b06d.js"><link rel="prefetch" href="/es4x/assets/js/6.bee7d20c.js"><link rel="prefetch" href="/es4x/assets/js/60.e74847c7.js"><link rel="prefetch" href="/es4x/assets/js/61.f45f1d70.js"><link rel="prefetch" href="/es4x/assets/js/62.c7245534.js"><link rel="prefetch" href="/es4x/assets/js/63.91dfc6d8.js"><link rel="prefetch" href="/es4x/assets/js/64.a9a5d5d7.js"><link rel="prefetch" href="/es4x/assets/js/65.82e7c7b1.js"><link rel="prefetch" href="/es4x/assets/js/66.9b26aed8.js"><link rel="prefetch" href="/es4x/assets/js/67.b882907b.js"><link rel="prefetch" href="/es4x/assets/js/68.6a6dc2a2.js"><link rel="prefetch" href="/es4x/assets/js/69.8e1e834e.js"><link rel="prefetch" href="/es4x/assets/js/7.408ffc95.js"><link rel="prefetch" href="/es4x/assets/js/70.f213078f.js"><link rel="prefetch" href="/es4x/assets/js/71.228413c9.js"><link rel="prefetch" href="/es4x/assets/js/72.d6ff0902.js"><link rel="prefetch" href="/es4x/assets/js/73.dbc371ba.js"><link rel="prefetch" href="/es4x/assets/js/74.13ff27d1.js"><link rel="prefetch" href="/es4x/assets/js/75.db024b7e.js"><link rel="prefetch" href="/es4x/assets/js/76.ef6180eb.js"><link rel="prefetch" href="/es4x/assets/js/77.7c3517c1.js"><link rel="prefetch" href="/es4x/assets/js/78.10e54671.js"><link rel="prefetch" href="/es4x/assets/js/79.b254f9ec.js"><link rel="prefetch" href="/es4x/assets/js/8.3d81d937.js"><link rel="prefetch" href="/es4x/assets/js/80.80c9d719.js"><link rel="prefetch" href="/es4x/assets/js/81.7be9486c.js"><link rel="prefetch" href="/es4x/assets/js/82.554dda8f.js"><link rel="prefetch" href="/es4x/assets/js/83.9d052d44.js"><link rel="prefetch" href="/es4x/assets/js/84.60798b2c.js"><link rel="prefetch" href="/es4x/assets/js/85.e4ce5e87.js"><link rel="prefetch" href="/es4x/assets/js/86.179d24c1.js"><link rel="prefetch" href="/es4x/assets/js/87.6d60cd83.js"><link rel="prefetch" href="/es4x/assets/js/88.6bfd1577.js"><link rel="prefetch" href="/es4x/assets/js/89.ddac2119.js"><link rel="prefetch" href="/es4x/assets/js/9.a0345499.js"><link rel="prefetch" href="/es4x/assets/js/90.4a4fd3dc.js"><link rel="prefetch" href="/es4x/assets/js/91.065cc9a5.js"><link rel="prefetch" href="/es4x/assets/js/92.80435a8d.js"><link rel="prefetch" href="/es4x/assets/js/93.b7af2039.js"><link rel="prefetch" href="/es4x/assets/js/94.b096f725.js"><link rel="prefetch" href="/es4x/assets/js/96.38f15cba.js"><link rel="prefetch" href="/es4x/assets/js/97.c53fc06f.js"><link rel="prefetch" href="/es4x/assets/js/98.3426a32c.js"><link rel="prefetch" href="/es4x/assets/js/99.a568bb05.js">
    <link rel="stylesheet" href="/es4x/assets/css/0.styles.57be2129.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/es4x/" class="home-link router-link-active"><!----> <span class="site-name">ES for Eclipse Vert.x</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/manual/" class="nav-link router-link-active">
  Manual
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/manual/@vertx/micrometer-metrics/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/manual/" class="nav-link router-link-active">
  Manual
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/manual/@vertx/micrometer-metrics/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Manuals</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/es4x/manual/" aria-current="page" class="sidebar-link">API Reference Manuals</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>This project is an implementation of the Vert.x Metrics Service Provider
Interface (SPI). It uses <a href="http://micrometer.io/" target="_blank" rel="noopener noreferrer">Micrometer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for
managing metrics and reporting to several backends.</p> <h1 id="features"><a href="#features" class="header-anchor">#</a> Features</h1> <ul><li><p>Vert.x core tools monitoring: TCP/HTTP client and servers,
<code>DatagramSocket</code> , <code>EventBus</code> and pools</p></li> <li><p>User defined metrics through Micrometer</p></li> <li><p>Reporting to any backend supported by Micrometer</p></li> <li><p>Built-in options for <a href="https://www.influxdata.com/" target="_blank" rel="noopener noreferrer">InfluxDB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
<a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and JMX reporting.</p></li></ul> <h1 id="influxdb"><a href="#influxdb" class="header-anchor">#</a> InfluxDB</h1> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>Follow the <a href="https://docs.influxdata.com/influxdb/latest/introduction/getting_started/" target="_blank" rel="noopener noreferrer">instructions to get InfluxDb up and
running<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h2> <p>The modules <em>vertx-micrometer-metrics</em> and <em>micrometer-registry-influx</em>
must be present in the classpath.</p> <p>Maven users should add this to their project POM file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.vertx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>vertx-micrometer-metrics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${maven.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.micrometer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>micrometer-registry-influx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${micrometer.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And Gradle users, to their build file:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>compile <span class="token string">'io.vertx:vertx-micrometer-metrics:${maven.version}'</span>
compile <span class="token string">'io.micrometer:micrometer-registry-influx:${micrometer.version}'</span>
</code></pre></div><h2 id="configuration-examples"><a href="#configuration-examples" class="header-anchor">#</a> Configuration examples</h2> <p>Vert.x does not enable SPI implementations by default. You must enable
metric collection in the Vert.x options.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setInfluxDbOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxInfluxDbOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="using-a-specific-uri-and-database-name"><a href="#using-a-specific-uri-and-database-name" class="header-anchor">#</a> Using a specific URI and database name</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setInfluxDbOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxInfluxDbOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setUri</span><span class="token punctuation">(</span><span class="token string">&quot;http://influxdb.example.com:8888&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setDb</span><span class="token punctuation">(</span><span class="token string">&quot;sales-department&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="with-authentication"><a href="#with-authentication" class="header-anchor">#</a> With authentication</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setInfluxDbOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxInfluxDbOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="prometheus"><a href="#prometheus" class="header-anchor">#</a> Prometheus</h1> <h2 id="prerequisites-2"><a href="#prerequisites-2" class="header-anchor">#</a> Prerequisites</h2> <p>Follow the <a href="https://prometheus.io/docs/prometheus/latest/getting_started/" target="_blank" rel="noopener noreferrer">instructions to get Prometheus up and
running<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="getting-started-2"><a href="#getting-started-2" class="header-anchor">#</a> Getting started</h2> <p>The modules <em>vertx-micrometer-metrics</em> and
<em>micrometer-registry-prometheus</em> must be present in the classpath. You
may also probably need <em>vertx-web</em>, to expose the metrics.</p> <p>Maven users should add this to their project POM file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.vertx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>vertx-micrometer-metrics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${maven.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.micrometer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>micrometer-registry-prometheus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${micrometer.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And Gradle users, to their build file:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>compile <span class="token string">'io.vertx:vertx-micrometer-metrics:${maven.version}'</span>
compile <span class="token string">'io.micrometer:micrometer-registry-prometheus:${micrometer.version}'</span>
</code></pre></div><h2 id="configuration-examples-2"><a href="#configuration-examples-2" class="header-anchor">#</a> Configuration examples</h2> <p>Vert.x does not enable SPI implementations by default. You must enable
metric collection in the Vert.x options</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="using-an-embedded-http-server-with-custom-endpoint"><a href="#using-an-embedded-http-server-with-custom-endpoint" class="header-anchor">#</a> Using an embedded HTTP server with custom endpoint</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setStartEmbeddedServer</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEmbeddedServerOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpServerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEmbeddedServerEndpoint</span><span class="token punctuation">(</span><span class="token string">&quot;/metrics/vertx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If the embedded server endpoint is not specified, it defaults to
<em>/metrics</em>.</p> <h3 id="binding-metrics-to-an-existing-vert-x-web-router"><a href="#binding-metrics-to-an-existing-vert-x-web-router" class="header-anchor">#</a> Binding metrics to an existing Vert.x Web router</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/web&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PrometheusScrapingHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/micrometer-metrics&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Later on, creating a router</span>
<span class="token keyword">let</span> router <span class="token operator">=</span> Router<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;/metrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">(</span>PrometheusScrapingHandler<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vertx<span class="token punctuation">.</span><span class="token function">createHttpServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestHandler</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="jmx"><a href="#jmx" class="header-anchor">#</a> JMX</h1> <h2 id="getting-started-3"><a href="#getting-started-3" class="header-anchor">#</a> Getting started</h2> <p>The modules <em>vertx-micrometer-metrics</em> and <em>micrometer-registry-jmx</em>
must be present in the classpath.</p> <p>Maven users should add this to their project POM file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.vertx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>vertx-micrometer-metrics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${maven.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.micrometer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>micrometer-registry-jmx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${micrometer.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And Gradle users, to their build file:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>compile <span class="token string">'io.vertx:vertx-micrometer-metrics:${maven.version}'</span>
compile <span class="token string">'io.micrometer:micrometer-registry-jmx:${micrometer.version}'</span>
</code></pre></div><h2 id="configuration-examples-3"><a href="#configuration-examples-3" class="header-anchor">#</a> Configuration examples</h2> <p>Vert.x does not enable SPI implementations by default. You must enable
metric collection in the Vert.x options</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxJmxMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="with-step-and-domain"><a href="#with-step-and-domain" class="header-anchor">#</a> With step and domain</h3> <p>In Micrometer, <code>step</code> refers to the reporting period, in seconds.
<code>domain</code> is the JMX domain under which MBeans are registered.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxJmxMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setStep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setDomain</span><span class="token punctuation">(</span><span class="token string">&quot;my.metrics.domain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="other-backends-or-combinations"><a href="#other-backends-or-combinations" class="header-anchor">#</a> Other backends or combinations</h1> <p>Even if not all backends supported by Micrometer are implemented in
Vert.x options, it is still possible to create any Micrometer registry
and pass it to Vert.x.</p> <p>The list of available backends includes Graphite, Ganglia, Atlas,
<a href="http://micrometer.io/docs" target="_blank" rel="noopener noreferrer">etc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It also enables the <a href="http://micrometer.io/docs/concepts#_composite_registries" target="_blank" rel="noopener noreferrer">Micrometer
Composite
Registry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in
order to report the same metrics to multiple backends.</p> <p>In this example, metrics are reported both for JMX and Graphite:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> myRegistry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.composite.CompositeMeterRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRegistry<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.jmx.JmxMeterRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.Clock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">SYSTEM</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myRegistry<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.graphite.GraphiteMeterRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.Clock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">SYSTEM</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMicrometerRegistry</span><span class="token punctuation">(</span>myRegistry<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="advanced-usage"><a href="#advanced-usage" class="header-anchor">#</a> Advanced usage</h1> <p>Please refer to <code>MicrometerMetricsOptions</code> for an exhaustive list of
options.</p> <h2 id="averages-and-quantiles-in-prometheus"><a href="#averages-and-quantiles-in-prometheus" class="header-anchor">#</a> Averages and quantiles in Prometheus</h2> <p>By default, when using the Prometheus registry, histogram-kind metrics
will not contain averages or quantile stats.</p> <p>Averages don’t come out of the box but they are typically <a href="https://prometheus.io/docs/practices/histograms/#count-and-sum-of-observations" target="_blank" rel="noopener noreferrer">computed at
query
time<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
with <code>promql</code>. Example, for HTTP client response time average during the
last 5 minutes:</p> <div class="language- extra-class"><pre class="language-text"><code> rate(vertx_http_client_responseTime_seconds_sum[5m])
/
 rate(vertx_http_client_responseTime_seconds_count[5m])
</code></pre></div><p>To compute quantiles, there are two options available. The first is to
activate quantile stats globally and make them usable for Prometheus
function <code>histogram_quantile</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setPublishQuantiles</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And then, for example the <code>promql</code> query for the HTTP client response
time, 99th percentile over the last 5 minutes:</p> <div class="language- extra-class"><pre class="language-text"><code> histogram_quantile(0.99, sum(rate(vertx_http_client_responseTime_seconds_bucket[5m])) by (le))
</code></pre></div><p>The advantage of this option is that it can be leveraged in <code>promql</code>,
aggregable across dimensions. The downside is that it creates a lot of
timeseries for stats under the hood.</p> <p>The second option is to create limited stats, non-aggregable across
dimensions. It requires to access directly the Micrometer / Prometheus
registry:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
registry<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">meterFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.config.MeterFilter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>See also, more on histograms and percentiles:</p> <ul><li><p>from <a href="https://micrometer.io/docs/concepts#_histograms_and_percentiles" target="_blank" rel="noopener noreferrer">Micrometer
doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>from <a href="https://prometheus.io/docs/prometheus/latest/querying/functions/#histogram_quantile" target="_blank" rel="noopener noreferrer">Prometheus
doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <p>Furthermore, you can check some <a href="https://github.com/vert-x3/vertx-examples/tree/master/micrometer-metrics-examples" target="_blank" rel="noopener noreferrer">full working
examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
They come along with few instructions to setup with Prometheus and view
dashboards in Grafana.</p> <h2 id="disable-some-metric-domains"><a href="#disable-some-metric-domains" class="header-anchor">#</a> Disable some metric domains</h2> <p>Restricting the Vert.x modules being monitored can be done using
<code>disabledMetricsCategories</code>.</p> <p>For a full list of domains, see <code>MetricsDomain</code></p> <h2 id="user-defined-metrics"><a href="#user-defined-metrics" class="header-anchor">#</a> User-defined metrics</h2> <p>The Micrometer registries are accessible, in order to create new metrics
or fetch the existing ones. By default, an unique registry is used and
will be shared across the Vert.x instances of the JVM:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>It is also possible to have separate registries per Vertx instance, by
giving a registry name in metrics options. Then it can be retrieved
specifically:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setInfluxDbOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxInfluxDbOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setRegistryName</span><span class="token punctuation">(</span><span class="token string">&quot;my registry&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Later on:</span>
<span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNow</span><span class="token punctuation">(</span><span class="token string">&quot;my registry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>As an example, here is a custom timer that will track the execution time
of a piece of code that is regularly called:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> timer <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.Timer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token string">&quot;my.timer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;a description of what this timer does&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>

vertx<span class="token punctuation">.</span><span class="token function">setPeriodic</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">l</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  timer<span class="token punctuation">.</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Running here some operation to monitor</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For more examples, documentation about the Micrometer registry and how
to create metrics, check <a href="http://micrometer.io/docs/concepts#_registry" target="_blank" rel="noopener noreferrer">Micrometer
doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="reusing-an-existing-registry"><a href="#reusing-an-existing-registry" class="header-anchor">#</a> Reusing an existing registry</h2> <p>It is possible to reuse an existing Micrometer registry (or
<code>CollectorRegistry</code> from the Prometheus Java client), and inject it into
the Vert.x metrics options:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token comment">// This registry might be used to collect metrics other than Vert.x ones</span>
<span class="token keyword">let</span> registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.prometheus.PrometheusMeterRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.prometheus.PrometheusConfig&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// You could also reuse an existing registry from the Prometheus Java client:</span>
<span class="token keyword">let</span> prometheusClientRegistry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.prometheus.client.CollectorRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.prometheus.PrometheusMeterRegistry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.prometheus.PrometheusConfig&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">,</span> prometheusClientRegistry<span class="token punctuation">,</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.Clock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">SYSTEM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// It's reused in MicrometerMetricsOptions.</span>
<span class="token comment">// Prometheus options configured here, such as &quot;setPublishQuantiles(true)&quot;, will affect the whole registry.</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setPublishQuantiles</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMicrometerRegistry</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="jvm-or-other-instrumentations"><a href="#jvm-or-other-instrumentations" class="header-anchor">#</a> JVM or other instrumentations</h2> <p>Since plain access to Micrometer registries is provided, it is possible
to leverage the Micrometer API. For instance, to instrument the JVM:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.binder.jvm.ClassLoaderMetrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.binder.jvm.JvmMemoryMetrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.binder.jvm.JvmGcMetrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.binder.system.ProcessorMetrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.binder.jvm.JvmThreadMetrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindTo</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><em>From <a href="http://micrometer.io/docs/ref/jvm" target="_blank" rel="noopener noreferrer">Micrometer documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</em></p> <h2 id="labels-and-matchers"><a href="#labels-and-matchers" class="header-anchor">#</a> Labels and matchers</h2> <p>Vert.x Micrometer Metrics defines a set of labels (aka tags or fields)
that are used to provide dimensionality to a metric. For instance,
metrics related to event bus messages have an <em>address</em> label, which
allows then to query timeseries for a specific event bus address, or
compare timeseries per address, or perform any kind of aggregation that
the query API allows.</p> <p>While setting up metrics options, you can specify which labels you want
to enable or not:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setLabels</span><span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;java.util.EnumSet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>Label<span class="token punctuation">.</span><span class="token constant">REMOTE</span><span class="token punctuation">,</span> Label<span class="token punctuation">.</span><span class="token constant">LOCAL</span><span class="token punctuation">,</span> Label<span class="token punctuation">.</span><span class="token constant">HTTP_CODE</span><span class="token punctuation">,</span> Label<span class="token punctuation">.</span><span class="token constant">HTTP_PATH</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The full list of labels is detailed here: <code>Label</code>.</p> <blockquote><p><strong>Warning</strong></p> <p>Enabling labels may result in a high cardinality in values, which can
cause troubles on the metrics backend and affect performances. So it
must be used with care. In general, it is fine to enable labels when
the set of possible values is bounded.</p></blockquote> <p>For that reason, labels enabled by default are restricted to the ones
with known bounded values.</p> <p>It is possible to interact with labels further than just
enabling/disabling. There are two ways for that:</p> <h3 id="using-matchers"><a href="#using-matchers" class="header-anchor">#</a> Using Matchers</h3> <p><code>Match</code> objects can be used to filter or rename some label value by
matching it with either an exact string or a regular expression (the
former being more efficient).</p> <p>Here is an example to restrict HTTP server metrics to those with label
<em>local=localhost:8080</em> only:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MicrometerMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrometheusOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxPrometheusOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setLabelMatchs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setDomain</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP_SERVER&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setLabel</span><span class="token punctuation">(</span><span class="token string">&quot;local&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:8080&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When an <em>alias</em> is specified in the Match, it will be used to rename
value instead of filtering.</p> <p>Matchers are especially useful to control labelling through
configuration as they are set via <code>MicrometerMetricsOptions</code>.</p> <h3 id="using-micrometer-s-meterfilter"><a href="#using-micrometer-s-meterfilter" class="header-anchor">#</a> Using Micrometer’s MeterFilter</h3> <p>Micrometer’s <a href="http://micrometer.io/docs/concepts#_meter_filters" target="_blank" rel="noopener noreferrer">MeterFilter
API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can be accessed
directly in order to define rules on labels. Compared to Matchers, it
offers more features in manipulating the labels, but cannot be defined
from configuration. So both have their advantages.</p> <p>Here is an example to replace the actual <code>path</code> label of HTTP requests
with a generic form using regex:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.vertx.micrometer.backends.BackendRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pattern <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;java.util.regex.Pattern&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;/foo/bar/.*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

registry<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">meterFilter</span><span class="token punctuation">(</span>Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;io.micrometer.core.instrument.config.MeterFilter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceTagValues</span><span class="token punctuation">(</span>Label<span class="token punctuation">.</span><span class="token constant">HTTP_PATH</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">actualPath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> m <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>actualPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;/foo/bar/:id&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> actualPath
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>Note</strong></p> <p>Matchers use MeterFilters under the hood.</p></blockquote> <h2 id="snapshots"><a href="#snapshots" class="header-anchor">#</a> Snapshots</h2> <p>A <code>MetricsService</code> can be created out of a <code>Measured</code> object in order to
take a snapshot of its related metrics and measurements. The snapshot is
returned as a <code>JsonObject</code>.</p> <p>A well known <em>Measured</em> object is simply <code>Vertx</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/micrometer-metrics&quot;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Other components, such as an <code>EventBus</code> or a <code>HttpServer</code> are
measurable:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/micrometer-metrics&quot;</span>
<span class="token keyword">let</span> server <span class="token operator">=</span> vertx<span class="token punctuation">.</span><span class="token function">createHttpServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Finally it is possible to filter the returned metrics from their base
names:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/micrometer-metrics&quot;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Client + server</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span><span class="token string">&quot;vertx.http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="vert-x-core-tools-metrics"><a href="#vert-x-core-tools-metrics" class="header-anchor">#</a> Vert.x core tools metrics</h1> <p>This section lists all the metrics generated by monitoring the Vert.x
core tools.</p> <blockquote><p><strong>Note</strong></p> <p>The metric backends may have different conventions or rules for naming
metrics. The names described below are given with underscore
separators, but the actual names may vary depending on the backend
used.</p></blockquote> <h2 id="net-client"><a href="#net-client" class="header-anchor">#</a> Net Client</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_net_client_connections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of connections to the remote host currently opened.</td></tr> <tr><td><code>vertx_net_client_bytesReceived</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes received from the remote host.</td></tr> <tr><td><code>vertx_net_client_bytesSent</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes sent to the remote host.</td></tr> <tr><td><code>vertx_net_client_errors</code></td> <td><code>local</code>, <code>remote</code>, <code>class</code></td> <td>Counter</td> <td>Number of errors.</td></tr></tbody></table> <h2 id="http-client"><a href="#http-client" class="header-anchor">#</a> HTTP Client</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_http_client_connections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of connections to the remote host currently opened.</td></tr> <tr><td><code>vertx_http_client_bytesReceived</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes received from the remote host.</td></tr> <tr><td><code>vertx_http_client_bytesSent</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes sent to the remote host.</td></tr> <tr><td><code>vertx_http_client_errors</code></td> <td><code>local</code>, <code>remote</code>, <code>class</code></td> <td>Counter</td> <td>Number of errors.</td></tr> <tr><td><code>vertx_http_client_requests</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code></td> <td>Gauge</td> <td>Number of requests waiting for a response.</td></tr> <tr><td><code>vertx_http_client_requestCount</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code></td> <td>Counter</td> <td>Number of requests sent.</td></tr> <tr><td><code>vertx_http_client_responseTime</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code>, <code>code</code></td> <td>Timer</td> <td>Response time.</td></tr> <tr><td><code>vertx_http_client_responseCount</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code>, <code>code</code></td> <td>Counter</td> <td>Number of received responses.</td></tr> <tr><td><code>vertx_http_client_wsConnections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of websockets currently opened.</td></tr></tbody></table> <h2 id="net-server"><a href="#net-server" class="header-anchor">#</a> Net Server</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_net_server_connections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of opened connections to the Net Server.</td></tr> <tr><td><code>vertx_net_server_bytesReceived</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes received by the Net Server.</td></tr> <tr><td><code>vertx_net_server_bytesSent</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes sent by the Net Server.</td></tr> <tr><td><code>vertx_net_server_errors</code></td> <td><code>local</code>, <code>remote</code>, <code>class</code></td> <td>Counter</td> <td>Number of errors.</td></tr></tbody></table> <h2 id="http-server"><a href="#http-server" class="header-anchor">#</a> HTTP Server</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_http_server_connections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of opened connections to the HTTP Server.</td></tr> <tr><td><code>vertx_http_server_bytesReceived</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes received by the HTTP Server.</td></tr> <tr><td><code>vertx_http_server_bytesSent</code></td> <td><code>local</code>, <code>remote</code></td> <td>Summary</td> <td>Number of bytes sent by the HTTP Server.</td></tr> <tr><td><code>vertx_http_server_errors</code></td> <td><code>local</code>, <code>remote</code>, <code>class</code></td> <td>Counter</td> <td>Number of errors.</td></tr> <tr><td><code>vertx_http_server_requests</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code></td> <td>Gauge</td> <td>Number of requests being processed.</td></tr> <tr><td><code>vertx_http_server_requestCount</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code>, <code>code</code></td> <td>Counter</td> <td>Number of processed requests.</td></tr> <tr><td><code>vertx_http_server_requestResetCount</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code></td> <td>Counter</td> <td>Number of requests reset.</td></tr> <tr><td><code>vertx_http_server_processingTime</code></td> <td><code>local</code>, <code>remote</code>, <code>path</code>, <code>method</code>, <code>code</code></td> <td>Timer</td> <td>Request processing time.</td></tr> <tr><td><code>vertx_http_client_wsConnections</code></td> <td><code>local</code>, <code>remote</code></td> <td>Gauge</td> <td>Number of websockets currently opened.</td></tr></tbody></table> <h2 id="datagram-socket"><a href="#datagram-socket" class="header-anchor">#</a> Datagram socket</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_datagram_bytesReceived</code></td> <td><code>local</code></td> <td>Summary</td> <td>Total number of bytes received on the <code>&lt;host&gt;:&lt;port&gt;</code> listening address.</td></tr> <tr><td><code>vertx_datagram_bytesSent</code></td> <td>(none)</td> <td>Summary</td> <td>Total number of bytes sent to the remote host.</td></tr> <tr><td><code>vertx_datagram_errors</code></td> <td><code>class</code></td> <td>Counter</td> <td>Total number of errors.</td></tr></tbody></table> <h2 id="event-bus"><a href="#event-bus" class="header-anchor">#</a> Event Bus</h2> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_eventbus_handlers</code></td> <td><code>address</code></td> <td>Gauge</td> <td>Number of event bus handlers in use.</td></tr> <tr><td><code>vertx_eventbus_errors</code></td> <td><code>address</code>,<code>class</code></td> <td>Counter</td> <td>Number of errors.</td></tr> <tr><td><code>vertx_eventbus_bytesWritten</code></td> <td><code>address</code></td> <td>Summary</td> <td>Total number of bytes sent while sending messages to event bus cluster peers.</td></tr> <tr><td><code>vertx_eventbus_bytesRead</code></td> <td><code>address</code></td> <td>Summary</td> <td>Total number of bytes received while reading messages from event bus cluster peers.</td></tr> <tr><td><code>vertx_eventbus_pending</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Gauge</td> <td>Number of messages not processed yet. One message published will count for <code>N</code> pending if <code>N</code> handlers are registered to the corresponding address.</td></tr> <tr><td><code>vertx_eventbus_published</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Counter</td> <td>Number of messages published (publish / subscribe).</td></tr> <tr><td><code>vertx_eventbus_discarded</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Counter</td> <td>Number of discarded messages (e.g. still pending messages while handler is unregistered, or overflowing messages).</td></tr> <tr><td><code>vertx_eventbus_sent</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Counter</td> <td>Number of messages sent (point-to-point).</td></tr> <tr><td><code>vertx_eventbus_received</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Counter</td> <td>Number of messages received.</td></tr> <tr><td><code>vertx_eventbus_delivered</code></td> <td><code>address</code>,<code>side</code> (local/remote)</td> <td>Counter</td> <td>Number of messages delivered to handlers.</td></tr> <tr><td><code>vertx_eventbus_replyFailures</code></td> <td><code>address</code>,<code>failure</code></td> <td>Counter</td> <td>Number of message reply failures.</td></tr> <tr><td><code>vertx_eventbus_processingTime</code></td> <td><code>address</code></td> <td>Timer</td> <td>Processing time for handlers listening to the <code>address</code>.</td></tr></tbody></table> <h1 id="vert-x-pool-metrics"><a href="#vert-x-pool-metrics" class="header-anchor">#</a> Vert.x pool metrics</h1> <p>This section lists all the metrics generated by monitoring Vert.x pools.</p> <p>There are two types currently supported:</p> <ul><li><p><em>worker</em> (see <code>WorkerExecutor</code>)</p></li> <li><p><em>datasource</em> (created with Vert.x JDBC client)</p></li></ul> <blockquote><p><strong>Note</strong></p> <p>Vert.x creates two worker pools upfront, <em>worker-thread</em> and
<em>internal-blocking</em>.</p></blockquote> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_pool_queue_delay</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Timer</td> <td>Time waiting for a resource (queue time).</td></tr> <tr><td><code>vertx_pool_queue_size</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Gauge</td> <td>Number of elements waiting for a resource.</td></tr> <tr><td><code>vertx_pool_usage</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Timer</td> <td>Time using a resource (i.e. processing time for worker pools).</td></tr> <tr><td><code>vertx_pool_inUse</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Gauge</td> <td>Number of resources used.</td></tr> <tr><td><code>vertx_pool_completed</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Counter</td> <td>Number of elements done with the resource (i.e. total number of tasks executed for worker pools).</td></tr> <tr><td><code>vertx_pool_ratio</code></td> <td><code>pool_type</code>,<code>pool_name</code></td> <td>Gauge</td> <td>Pool usage ratio, only present if maximum pool size could be determined.</td></tr></tbody></table> <h1 id="verticle-metrics"><a href="#verticle-metrics" class="header-anchor">#</a> Verticle metrics</h1> <table><thead><tr><th>Metric name</th> <th>Labels</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>vertx_verticle_deployed</code></td> <td><code>name</code></td> <td>Gauge</td> <td>Number of verticle instances deployed.</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/reactiverse/es4x/edit/develop/docs/manual/@vertx/micrometer-metrics/index.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/22/2020, 10:49:01 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/es4x/assets/js/app.837a6700.js" defer></script><script src="/es4x/assets/js/2.96613d0f.js" defer></script><script src="/es4x/assets/js/95.af24f6b1.js" defer></script>
  </body>
</html>
