(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{338:function(t,a,s){"use strict";s.r(a);var n=s(28),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"using-transactions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-transactions"}},[t._v("#")]),t._v(" Using transactions")]),t._v(" "),s("h2",{attrs:{id:"transactions-with-connections"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transactions-with-connections"}},[t._v("#")]),t._v(" Transactions with connections")]),t._v(" "),s("p",[t._v("You can execute transaction using SQL "),s("code",[t._v("BEGIN")]),t._v("/"),s("code",[t._v("COMMIT")]),t._v("/"),s("code",[t._v("ROLLBACK")]),t._v(", if\nyou do so you must use a "),s("code",[t._v("SqlConnection")]),t._v(" and manage it yourself.")]),t._v(" "),s("p",[t._v("Or you can use the transaction API of "),s("code",[t._v("SqlConnection")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("transaction01")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("p",[t._v("When PostgreSQL reports the current transaction is failed (e.g the\ninfamous "),s("em",[t._v("current transaction is aborted, commands ignored until end of\ntransaction block")]),t._v("), the transaction is rollbacked and the\n"),s("code",[t._v("abortHandler")]),t._v(" is called:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("transaction02")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("h2",{attrs:{id:"simplified-transaction-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simplified-transaction-api"}},[t._v("#")]),t._v(" Simplified transaction API")]),t._v(" "),s("p",[t._v("When you use a pool, you can start a transaction directly on the pool.")]),t._v(" "),s("p",[t._v("It borrows a connection from the pool, begins the transaction and\nreleases the connection to the pool when the transaction ends.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("transaction03")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("Note")])]),t._v(" "),s("p",[t._v("this code will not close the connection because it will always be\nreleased back to the pool when the transaction")])])])}),[],!1,null,null,null);a.default=e.exports}}]);