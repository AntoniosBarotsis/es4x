<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES for Eclipse Vert.x</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" type="image/png" href="/es4x/favicon.png">
    <link rel="stylesheet" type="text/css" href="/es4x/player/asciinema-player.css">
    <script src="/es4x/player/asciinema-player.js"></script>
    <meta name="description" content="A Modern JavaScript runtime for Eclipse Vert.x">
    <link rel="preload" href="/es4x/assets/css/0.styles.57be2129.css" as="style"><link rel="preload" href="/es4x/assets/js/app.cfb14a02.js" as="script"><link rel="preload" href="/es4x/assets/js/2.96613d0f.js" as="script"><link rel="preload" href="/es4x/assets/js/8.3d81d937.js" as="script"><link rel="prefetch" href="/es4x/assets/js/10.25f493b2.js"><link rel="prefetch" href="/es4x/assets/js/100.cfb483ce.js"><link rel="prefetch" href="/es4x/assets/js/101.e546445b.js"><link rel="prefetch" href="/es4x/assets/js/102.9c678484.js"><link rel="prefetch" href="/es4x/assets/js/103.58ddcfc8.js"><link rel="prefetch" href="/es4x/assets/js/104.5d636807.js"><link rel="prefetch" href="/es4x/assets/js/105.9c9f8986.js"><link rel="prefetch" href="/es4x/assets/js/106.fb797c19.js"><link rel="prefetch" href="/es4x/assets/js/107.29eb69ad.js"><link rel="prefetch" href="/es4x/assets/js/108.d97e0b4e.js"><link rel="prefetch" href="/es4x/assets/js/109.28629ef4.js"><link rel="prefetch" href="/es4x/assets/js/11.6250afa8.js"><link rel="prefetch" href="/es4x/assets/js/110.3dd0cba3.js"><link rel="prefetch" href="/es4x/assets/js/111.601b115c.js"><link rel="prefetch" href="/es4x/assets/js/112.a49c45ac.js"><link rel="prefetch" href="/es4x/assets/js/113.ea0e864c.js"><link rel="prefetch" href="/es4x/assets/js/114.24c46597.js"><link rel="prefetch" href="/es4x/assets/js/115.65241419.js"><link rel="prefetch" href="/es4x/assets/js/116.a69493f0.js"><link rel="prefetch" href="/es4x/assets/js/117.03106a2c.js"><link rel="prefetch" href="/es4x/assets/js/118.50ed2245.js"><link rel="prefetch" href="/es4x/assets/js/119.beb4913a.js"><link rel="prefetch" href="/es4x/assets/js/12.1f7f2bd3.js"><link rel="prefetch" href="/es4x/assets/js/120.f13c267c.js"><link rel="prefetch" href="/es4x/assets/js/121.197dd995.js"><link rel="prefetch" href="/es4x/assets/js/122.b44c98b3.js"><link rel="prefetch" href="/es4x/assets/js/123.4586e425.js"><link rel="prefetch" href="/es4x/assets/js/124.d00a049e.js"><link rel="prefetch" href="/es4x/assets/js/125.1f32b7a7.js"><link rel="prefetch" href="/es4x/assets/js/126.e0bbd98d.js"><link rel="prefetch" href="/es4x/assets/js/127.fc93d280.js"><link rel="prefetch" href="/es4x/assets/js/128.98e5a4cc.js"><link rel="prefetch" href="/es4x/assets/js/129.fb3a3f88.js"><link rel="prefetch" href="/es4x/assets/js/13.1a7b9986.js"><link rel="prefetch" href="/es4x/assets/js/130.5cd4d89d.js"><link rel="prefetch" href="/es4x/assets/js/131.6ac7fa33.js"><link rel="prefetch" href="/es4x/assets/js/132.c8ad9a79.js"><link rel="prefetch" href="/es4x/assets/js/133.90881bb4.js"><link rel="prefetch" href="/es4x/assets/js/134.f7596c11.js"><link rel="prefetch" href="/es4x/assets/js/135.f8db6a39.js"><link rel="prefetch" href="/es4x/assets/js/136.bd2de92d.js"><link rel="prefetch" href="/es4x/assets/js/137.eabfa5f6.js"><link rel="prefetch" href="/es4x/assets/js/138.c19e308b.js"><link rel="prefetch" href="/es4x/assets/js/139.e437bff1.js"><link rel="prefetch" href="/es4x/assets/js/14.b66836b1.js"><link rel="prefetch" href="/es4x/assets/js/140.8d09b641.js"><link rel="prefetch" href="/es4x/assets/js/141.4d46fb84.js"><link rel="prefetch" href="/es4x/assets/js/142.99040345.js"><link rel="prefetch" href="/es4x/assets/js/143.7d902150.js"><link rel="prefetch" href="/es4x/assets/js/144.0543ff8f.js"><link rel="prefetch" href="/es4x/assets/js/145.6a2886f8.js"><link rel="prefetch" href="/es4x/assets/js/146.01466845.js"><link rel="prefetch" href="/es4x/assets/js/147.42e445c8.js"><link rel="prefetch" href="/es4x/assets/js/148.e677edea.js"><link rel="prefetch" href="/es4x/assets/js/149.50959280.js"><link rel="prefetch" href="/es4x/assets/js/15.bd087613.js"><link rel="prefetch" href="/es4x/assets/js/150.eabb62e5.js"><link rel="prefetch" href="/es4x/assets/js/151.a6f046ed.js"><link rel="prefetch" href="/es4x/assets/js/152.78e21db3.js"><link rel="prefetch" href="/es4x/assets/js/153.eef01fd9.js"><link rel="prefetch" href="/es4x/assets/js/154.f5b66c27.js"><link rel="prefetch" href="/es4x/assets/js/155.f5cbe3be.js"><link rel="prefetch" href="/es4x/assets/js/156.3fdf30f1.js"><link rel="prefetch" href="/es4x/assets/js/157.aeebd96f.js"><link rel="prefetch" href="/es4x/assets/js/158.bec405e9.js"><link rel="prefetch" href="/es4x/assets/js/159.f81bc2fa.js"><link rel="prefetch" href="/es4x/assets/js/16.a392a655.js"><link rel="prefetch" href="/es4x/assets/js/160.611a570e.js"><link rel="prefetch" href="/es4x/assets/js/161.400aed1c.js"><link rel="prefetch" href="/es4x/assets/js/162.60fdd908.js"><link rel="prefetch" href="/es4x/assets/js/163.841834be.js"><link rel="prefetch" href="/es4x/assets/js/164.368aca3b.js"><link rel="prefetch" href="/es4x/assets/js/165.6ed202c4.js"><link rel="prefetch" href="/es4x/assets/js/166.cd243b01.js"><link rel="prefetch" href="/es4x/assets/js/167.74493e23.js"><link rel="prefetch" href="/es4x/assets/js/168.26ae4c80.js"><link rel="prefetch" href="/es4x/assets/js/169.adffbf41.js"><link rel="prefetch" href="/es4x/assets/js/17.f58ddc3f.js"><link rel="prefetch" href="/es4x/assets/js/170.ec119bad.js"><link rel="prefetch" href="/es4x/assets/js/171.8ce41d74.js"><link rel="prefetch" href="/es4x/assets/js/172.c0640f4c.js"><link rel="prefetch" href="/es4x/assets/js/18.d0e693e8.js"><link rel="prefetch" href="/es4x/assets/js/19.2cfa07bf.js"><link rel="prefetch" href="/es4x/assets/js/20.83c2c4e9.js"><link rel="prefetch" href="/es4x/assets/js/21.bfb22c95.js"><link rel="prefetch" href="/es4x/assets/js/22.80259bfc.js"><link rel="prefetch" href="/es4x/assets/js/23.d3df90af.js"><link rel="prefetch" href="/es4x/assets/js/24.47cf75e1.js"><link rel="prefetch" href="/es4x/assets/js/25.af00dd42.js"><link rel="prefetch" href="/es4x/assets/js/26.2c5dd1f3.js"><link rel="prefetch" href="/es4x/assets/js/27.313c4d9d.js"><link rel="prefetch" href="/es4x/assets/js/28.c3fa5296.js"><link rel="prefetch" href="/es4x/assets/js/29.bc391437.js"><link rel="prefetch" href="/es4x/assets/js/3.4d2250de.js"><link rel="prefetch" href="/es4x/assets/js/30.ab72b827.js"><link rel="prefetch" href="/es4x/assets/js/31.360cf0c4.js"><link rel="prefetch" href="/es4x/assets/js/32.a454f02e.js"><link rel="prefetch" href="/es4x/assets/js/33.9072e3dc.js"><link rel="prefetch" href="/es4x/assets/js/34.2cd817f7.js"><link rel="prefetch" href="/es4x/assets/js/35.1499c4b4.js"><link rel="prefetch" href="/es4x/assets/js/36.b24867f2.js"><link rel="prefetch" href="/es4x/assets/js/37.8a1d9476.js"><link rel="prefetch" href="/es4x/assets/js/38.1caa3e15.js"><link rel="prefetch" href="/es4x/assets/js/39.ab25bad3.js"><link rel="prefetch" href="/es4x/assets/js/4.2410671b.js"><link rel="prefetch" href="/es4x/assets/js/40.13850330.js"><link rel="prefetch" href="/es4x/assets/js/41.1f30e160.js"><link rel="prefetch" href="/es4x/assets/js/42.f65b46db.js"><link rel="prefetch" href="/es4x/assets/js/43.86bd3898.js"><link rel="prefetch" href="/es4x/assets/js/44.25aede52.js"><link rel="prefetch" href="/es4x/assets/js/45.fbb6033a.js"><link rel="prefetch" href="/es4x/assets/js/46.13bb4f87.js"><link rel="prefetch" href="/es4x/assets/js/47.01a4d32b.js"><link rel="prefetch" href="/es4x/assets/js/48.4ef5e818.js"><link rel="prefetch" href="/es4x/assets/js/49.896ad60c.js"><link rel="prefetch" href="/es4x/assets/js/5.f2fd7a11.js"><link rel="prefetch" href="/es4x/assets/js/50.54a8010f.js"><link rel="prefetch" href="/es4x/assets/js/51.26142f55.js"><link rel="prefetch" href="/es4x/assets/js/52.b132a309.js"><link rel="prefetch" href="/es4x/assets/js/53.dc983026.js"><link rel="prefetch" href="/es4x/assets/js/54.3ae4a5b7.js"><link rel="prefetch" href="/es4x/assets/js/55.4b3e9675.js"><link rel="prefetch" href="/es4x/assets/js/56.2cc05aac.js"><link rel="prefetch" href="/es4x/assets/js/57.f8c33e2c.js"><link rel="prefetch" href="/es4x/assets/js/58.7b7e6201.js"><link rel="prefetch" href="/es4x/assets/js/59.beab06b9.js"><link rel="prefetch" href="/es4x/assets/js/6.7eb69711.js"><link rel="prefetch" href="/es4x/assets/js/60.ad528007.js"><link rel="prefetch" href="/es4x/assets/js/61.7462fe68.js"><link rel="prefetch" href="/es4x/assets/js/62.c7245534.js"><link rel="prefetch" href="/es4x/assets/js/63.91dfc6d8.js"><link rel="prefetch" href="/es4x/assets/js/64.a9a5d5d7.js"><link rel="prefetch" href="/es4x/assets/js/65.bd897469.js"><link rel="prefetch" href="/es4x/assets/js/66.b6b4afbd.js"><link rel="prefetch" href="/es4x/assets/js/67.b882907b.js"><link rel="prefetch" href="/es4x/assets/js/68.32bb2628.js"><link rel="prefetch" href="/es4x/assets/js/69.6e7fa7f2.js"><link rel="prefetch" href="/es4x/assets/js/7.e56c8e30.js"><link rel="prefetch" href="/es4x/assets/js/70.9fa2afb4.js"><link rel="prefetch" href="/es4x/assets/js/71.228413c9.js"><link rel="prefetch" href="/es4x/assets/js/72.4a3f3614.js"><link rel="prefetch" href="/es4x/assets/js/73.abf3fc90.js"><link rel="prefetch" href="/es4x/assets/js/74.13ff27d1.js"><link rel="prefetch" href="/es4x/assets/js/75.96ffdfe8.js"><link rel="prefetch" href="/es4x/assets/js/76.ef6180eb.js"><link rel="prefetch" href="/es4x/assets/js/77.7c3517c1.js"><link rel="prefetch" href="/es4x/assets/js/78.a4cb55ca.js"><link rel="prefetch" href="/es4x/assets/js/79.2a3d8a2f.js"><link rel="prefetch" href="/es4x/assets/js/80.80c9d719.js"><link rel="prefetch" href="/es4x/assets/js/81.7be9486c.js"><link rel="prefetch" href="/es4x/assets/js/82.f30975e2.js"><link rel="prefetch" href="/es4x/assets/js/83.2e22eebd.js"><link rel="prefetch" href="/es4x/assets/js/84.60798b2c.js"><link rel="prefetch" href="/es4x/assets/js/85.a6928290.js"><link rel="prefetch" href="/es4x/assets/js/86.0be2ea51.js"><link rel="prefetch" href="/es4x/assets/js/87.ad51e710.js"><link rel="prefetch" href="/es4x/assets/js/88.81d5d220.js"><link rel="prefetch" href="/es4x/assets/js/89.aac46f66.js"><link rel="prefetch" href="/es4x/assets/js/9.2edb4e2b.js"><link rel="prefetch" href="/es4x/assets/js/90.4a4fd3dc.js"><link rel="prefetch" href="/es4x/assets/js/91.065cc9a5.js"><link rel="prefetch" href="/es4x/assets/js/92.055a4ecc.js"><link rel="prefetch" href="/es4x/assets/js/93.71b53f02.js"><link rel="prefetch" href="/es4x/assets/js/94.b096f725.js"><link rel="prefetch" href="/es4x/assets/js/95.af24f6b1.js"><link rel="prefetch" href="/es4x/assets/js/96.38f15cba.js"><link rel="prefetch" href="/es4x/assets/js/97.c53fc06f.js"><link rel="prefetch" href="/es4x/assets/js/98.3426a32c.js"><link rel="prefetch" href="/es4x/assets/js/99.fa951d15.js">
    <link rel="stylesheet" href="/es4x/assets/css/0.styles.57be2129.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/es4x/" class="home-link router-link-active"><!----> <span class="site-name">ES for Eclipse Vert.x</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/manual/" class="nav-link router-link-active">
  Manual
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/manual/@vertx/dropwizard-metrics/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/manual/" class="nav-link router-link-active">
  Manual
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/manual/@vertx/dropwizard-metrics/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Manuals</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/es4x/manual/" aria-current="page" class="sidebar-link">API Reference Manuals</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>This project implements the Vert.x Metrics Service Provider Interface
(SPI) reporting metrics to the <a href="https://github.com/dropwizard/metrics" target="_blank" rel="noopener noreferrer">Dropwizard
metrics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library.</p> <h1 id="features"><a href="#features" class="header-anchor">#</a> Features</h1> <p>A fairly simple API to retrieve metrics via the <code>Measured</code> interface
which is implemented by various Vert.x components like <code>HttpServer</code>,
<code>NetServer</code>, and even <code>Vertx</code> itself.</p> <p>Configurable JMX reporting based on Dropwizard implementation, exposing
Vert.x as JMX MBeans.</p> <h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h1> <p>To enable metrics, add the following dependency to the <em>dependencies</em>
section of your build descriptor:</p> <ul><li>Maven (in your <code>pom.xml</code>):</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.vertx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>vertx-dropwizard-metrics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${maven.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Gradle (in your <code>build.gradle</code> file):</li></ul> <div class="language-groovy extra-class"><pre class="language-groovy"><code>compile <span class="token string">'io.vertx:vertx-dropwizard-metrics:${maven.version}'</span>
</code></pre></div><p>Then when you create vertx enable metrics using the
<code>DropwizardMetricsOptions</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also enable JMX:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To see details about JMX see the <a href="#jmx">JMX</a> section at the bottom.</p> <h1 id="command-line-activation"><a href="#command-line-activation" class="header-anchor">#</a> Command line activation</h1> <p>When running Vert.x from the command line interface, metrics can be
activated via JVM system properties. System properties beginning with
<em>vertx.metrics.options.</em> are transmitted to the metrics options.</p> <p>The <em>vertx.metrics.options.enabled</em> is a standard Vert.x Core option for
enabling the metrics implementations, this options must be set to
<code>true</code>:</p> <div class="language- extra-class"><pre><code>java -jar your-fat-jar -Dvertx.metrics.options.enabled=true
</code></pre></div><p>The <code>vertx.metrics.options.registryName</code> configures the <a href="#dropwizard-registry">Dropwizard
Registry</a> to use:</p> <div class="language- extra-class"><pre><code>java -jar your-fat-jar -Dvertx.metrics.options.enabled=true -Dvertx.metrics.options.registryName=my-registry
</code></pre></div><p>The <code>vertx.metrics.options.jmxEnabled</code> and
<code>vertx.metrics.options.jmxDomain</code> configures the <a href="#jmx">JMX</a>
registration:</p> <div class="language- extra-class"><pre><code>java -jar your-fat-jar -Dvertx.metrics.options.enabled=true -Dvertx.metrics.options.jmxEnabled=true ...
</code></pre></div><p>The <code>vertx.metrics.options.configPath</code> option allows to reconfigure the
metrics from a property file.</p> <h1 id="metrics-service"><a href="#metrics-service" class="header-anchor">#</a> Metrics service</h1> <p>While Vert.x core defines an SPI for reporting metrics (implemented for
instance in this project), it does not define an API for retrieving
metrics (because some metrics collectors just do reporting and nothing
more).</p> <p>The <code>MetricsService</code> provides an API in front of the Dropwizard Registry
to get metrics data snapshots.</p> <h2 id="naming"><a href="#naming" class="header-anchor">#</a> Naming</h2> <p>Each measured component listed below (except for Vertx) will have a base
name associated with it. Each metric can be retrieved by providing the
fully qualified name &lt;fqn&gt; <code>baseName</code> + <code>.</code> + <code>metricName</code> from Vertx:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
metrics<span class="token punctuation">.</span>vertx<span class="token punctuation">.</span>eventbus<span class="token punctuation">.</span>handlers<span class="token punctuation">;</span>
</code></pre></div><p>or from the measured component itself using just the metric name:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> eventBus <span class="token operator">=</span> vertx<span class="token punctuation">.</span><span class="token function">eventBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span>eventBus<span class="token punctuation">)</span><span class="token punctuation">;</span>
metrics<span class="token punctuation">.</span>handlers<span class="token punctuation">;</span>
</code></pre></div><p>See more examples below on how to retrieve/use metrics for a specific
component.</p> <p>Metrics names can also be listed:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> metricsNames <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">metricsNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
metricsNames<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">metricsName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Known metrics name &quot;</span> <span class="token operator">+</span> metricsName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>baseName</code> defaults to <code>vertx</code>, but can be set to a custom value:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> metricsOptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setBaseName</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="retrieving-metrics"><a href="#retrieving-metrics" class="header-anchor">#</a> Retrieving metrics</h2> <p>Once enabled, the <code>MetricsService</code> allows to retrieve metrics snapshots
from any <code>Measured</code> object which provides a map of the metric name to
the data, represented by a <code>JsonObject</code>. So for example if we were to
print out all metrics for a particular Vert.x instance:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/dropwizard&quot;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>Note</strong></p> <p>For details on the actual contents of the data (the actual metric)
represented by the <code>JsonObject</code> consult the implementation
documentation like
<a href="https://github.com/vert-x3/vertx-metrics" target="_blank" rel="noopener noreferrer">vertx-metrics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>Often it is desired that you only want to capture specific metrics for a
particular component, like an http server without having to know the
details of the naming scheme of every metric (something which is left to
the implementers of the SPI).</p> <p>Since <code>HttpServer</code> implements <code>Measured</code>, you can easily grab all
metrics that are specific for that particular http server.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/dropwizard&quot;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> server <span class="token operator">=</span> vertx<span class="token punctuation">.</span><span class="token function">createHttpServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// set up server</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Metrics can also be retrieved using a base name:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetricsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/dropwizard&quot;</span>
<span class="token keyword">let</span> metricsService <span class="token operator">=</span> MetricsService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>vertx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> metrics <span class="token operator">=</span> metricsService<span class="token punctuation">.</span><span class="token function">getMetricsSnapshot</span><span class="token punctuation">(</span><span class="token string">&quot;vertx.eventbus.message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="data"><a href="#data" class="header-anchor">#</a> Data</h1> <p>Below is how each dropwizard metric is represented in JSON. Please refer
to the <a href="https://github.com/dropwizard/metrics" target="_blank" rel="noopener noreferrer">Dropwizard metrics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
documentation for detailed information on each metric.</p> <h2 id="gauge"><a href="#gauge" class="header-anchor">#</a> Gauge</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span>  <span class="token operator">:</span> <span class="token string">&quot;gauge&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;value&quot;</span> <span class="token operator">:</span> value <span class="token comment">// any json value</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="counter"><a href="#counter" class="header-anchor">#</a> Counter</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span>  <span class="token operator">:</span> <span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;count&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// number</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="histogram"><a href="#histogram" class="header-anchor">#</a> Histogram</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span>   <span class="token operator">:</span> <span class="token string">&quot;histogram&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;count&quot;</span>  <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;min&quot;</span>    <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;max&quot;</span>    <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;mean&quot;</span>   <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;stddev&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;median&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;75%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;95%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;98%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99.9%&quot;</span>  <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="meter"><a href="#meter" class="header-anchor">#</a> Meter</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;meter&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;count&quot;</span>             <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;meanRate&quot;</span>          <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;oneMinuteRate&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fiveMinuteRate&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fifteenMinuteRate&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;rate&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;events/second&quot;</span> <span class="token comment">// string representing rate</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="throughputmeter"><a href="#throughputmeter" class="header-anchor">#</a> ThroughputMeter</h2> <p>Extends a <a href="#meter">Meter</a> to provide an instant throughput.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;meter&quot;</span><span class="token punctuation">,</span>
 <span class="token string">&quot;count&quot;</span>             <span class="token operator">:</span> <span class="token number">40</span> <span class="token comment">// long</span>
 <span class="token string">&quot;meanRate&quot;</span>          <span class="token operator">:</span> <span class="token number">2.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;oneSecondRate&quot;</span>     <span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// long - number of occurence for the last second</span>
 <span class="token string">&quot;oneMinuteRate&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fiveMinuteRate&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fifteenMinuteRate&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;rate&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;events/second&quot;</span> <span class="token comment">// string representing rate</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="timer"><a href="#timer" class="header-anchor">#</a> Timer</h2> <p>A timer is basically a combination of Histogram + Meter.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;timer&quot;</span><span class="token punctuation">,</span>

 <span class="token comment">// histogram data</span>
 <span class="token string">&quot;count&quot;</span>  <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;min&quot;</span>    <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;max&quot;</span>    <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;mean&quot;</span>   <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;stddev&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;median&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;75%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;95%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;98%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99%&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99.9%&quot;</span>  <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>

 <span class="token comment">// meter data</span>
 <span class="token string">&quot;meanRate&quot;</span>          <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;oneMinuteRate&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fiveMinuteRate&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fifteenMinuteRate&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;rate&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;events/second&quot;</span> <span class="token comment">// string representing rate</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="throughput-timer"><a href="#throughput-timer" class="header-anchor">#</a> Throughput Timer</h2> <p>Extends a <a href="#timer">Timer</a> to provide an instant throughput metric.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
 <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;timer&quot;</span><span class="token punctuation">,</span>

 <span class="token comment">// histogram data</span>
 <span class="token string">&quot;count&quot;</span>      <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;min&quot;</span>        <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;max&quot;</span>        <span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// long</span>
 <span class="token string">&quot;mean&quot;</span>       <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;stddev&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;median&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;75%&quot;</span>        <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;95%&quot;</span>        <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;98%&quot;</span>        <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99%&quot;</span>        <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;99.9%&quot;</span>      <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>

 <span class="token comment">// meter data</span>
 <span class="token string">&quot;meanRate&quot;</span>          <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;oneSecondRate&quot;</span>     <span class="token operator">:</span> <span class="token number">3</span> <span class="token comment">// long - number of occurence for the last second</span>
 <span class="token string">&quot;oneMinuteRate&quot;</span>     <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fiveMinuteRate&quot;</span>    <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;fifteenMinuteRate&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span> <span class="token comment">// double</span>
 <span class="token string">&quot;rate&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;events/second&quot;</span> <span class="token comment">// string representing rate</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="the-metrics"><a href="#the-metrics" class="header-anchor">#</a> The metrics</h1> <p>The following metrics are currently provided.</p> <h2 id="vert-x-metrics"><a href="#vert-x-metrics" class="header-anchor">#</a> Vert.x metrics</h2> <p>The following metrics are provided:</p> <ul><li><p><code>vertx.event-loop-size</code> - A <a href="#gauge">Gauge</a> of the number of threads
in the event loop pool</p></li> <li><p><code>vertx.worker-pool-size</code> - A <a href="#gauge">Gauge</a> of the number of
threads in the worker pool</p></li> <li><p><code>vertx.cluster-host</code> - A <a href="#gauge">Gauge</a> of the cluster-host setting</p></li> <li><p><code>vertx.cluster-port</code> - A <a href="#gauge">Gauge</a> of the cluster-port setting</p></li> <li><p><code>vertx.verticles</code> - A <a href="#counter">Counter</a> of the number of verticles
currently deployed</p></li> <li><p><code>vertx.verticles.&lt;verticle-name&gt;</code> - A <a href="#counter">Counter</a> of the
number of deployment of a particular verticle</p></li></ul> <h2 id="event-bus-metrics"><a href="#event-bus-metrics" class="header-anchor">#</a> Event bus metrics</h2> <p>Base name: <code>vertx.eventbus</code></p> <ul><li><p><code>handlers</code> - A <a href="#counter">Counter</a> of the number of event bus
handlers</p></li> <li><p><code>handlers.myaddress</code> - A <a href="#timer">Timer</a> representing the rate of
which messages are being processed for the <em>myaddress</em> handler</p></li> <li><p><code>messages.bytes-read</code> - A <a href="#meter">Meter</a> of the number of bytes
read when receiving remote messages</p></li> <li><p><code>messages.bytes-written</code> - A <a href="#meter">Meter</a> of the number of bytes
written when sending remote messages</p></li> <li><p><code>messages.pending</code> - A <a href="#counter">Counter</a> of the number of messages
received but not yet processed by an handler</p></li> <li><p><code>messages.pending-local</code> - A <a href="#counter">Counter</a> of the number of
messages locally received but not yet processed by an handler</p></li> <li><p><code>messages.pending-remote</code> - A <a href="#counter">Counter</a> of the number of
messages remotely received but not yet processed by an handler</p></li> <li><p><code>messages.discarded</code> - A <a href="#counter">Counter</a> of the number of
messages discarded by an handler</p></li> <li><p><code>messages.discarded-local</code> - A <a href="#counter">Counter</a> of the number of
messages locally discarded by an handler</p></li> <li><p><code>messages.discarded-remote</code> - A <a href="#counter">Counter</a> of the number of
messages remotely discarded by an handler</p></li> <li><p><code>messages.received</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being received</p></li> <li><p><code>messages.received-local</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which local messages are being received</p></li> <li><p><code>messages.received-remote</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which remote messages are being received</p></li> <li><p><code>messages.delivered</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being delivered to an
handler</p></li> <li><p><code>messages.delivered-local</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which local messages are being delivered to
an handler</p></li> <li><p><code>messages.delivered-remote</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which remote messages are being delivered
to an handler</p></li> <li><p><code>messages.sent</code> - A <a href="#throughput_metert">???</a> representing the rate
of which messages are being sent</p></li> <li><p><code>messages.sent-local</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being sent locally</p></li> <li><p><code>messages.sent-remote</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being sent remotely</p></li> <li><p><code>messages.published</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being published</p></li> <li><p><code>messages.published-local</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being published locally</p></li> <li><p><code>messages.published-remote</code> - A <a href="#throughput_meter">ThroughputMeter</a>
representing the rate of which messages are being published remotely</p></li> <li><p><code>messages.reply-failures</code> - A <a href="#meter">Meter</a> representing the rate
of reply failures</p></li></ul> <p>The monitored event bus handlers is configurable via a match performed
on the handler registration address. Vert.x can have potentially a huge
amount of registered event bus, therefore the only good default for this
setting is to monitor zero handlers.</p> <p>The monitored handlers can be configured in the
<code>DropwizardMetricsOptions</code> via a specific address match or a regex
match:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMonitoredEventBusHandlers</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;some-address&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;business-.*&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;REGEX&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>Warning</strong></p> <p>if you use regex match, a wrong regex can potentially match a lot of
handlers.</p></blockquote> <h2 id="http-server-metrics"><a href="#http-server-metrics" class="header-anchor">#</a> Http server metrics</h2> <p>Base name: <code>vertx.http.servers.&lt;host&gt;:&lt;port&gt;</code></p> <p>Http server includes all the metrics of a <a href="#net-server-metrics">Net
Server</a> plus the following:</p> <ul><li><p><code>requests</code> - A <a href="#throughput_timer">Throughput Timer</a> of a request
and the rate of it’s occurrence</p></li> <li><p><code>&lt;http-method&gt;-requests</code> - A <a href="#throughput_timer">Throughput Timer</a>
of a specific http method request and the rate of it’s occurrence</p> <ul><li>Examples: <code>get-requests</code>, <code>post-requests</code></li></ul></li> <li><p><code>&lt;http-method&gt;-requests./&lt;uri&gt;</code> - A <a href="#throughput_timer">Throughput
Timer</a> of a specific http method &amp; URI request
and the rate of it’s occurrence</p> <ul><li>Examples: <code>get-requests./some/uri</code>,
<code>post-requests./some/uri?foo=bar</code></li></ul></li> <li><p><code>responses-1xx</code> - A <a href="#throughput_meter">ThroughputMeter</a> of the 1xx
response code</p></li> <li><p><code>responses-2xx</code> - A <a href="#throughput_meter">ThroughputMeter</a> of the 2xx
response code</p></li> <li><p><code>responses-3xx</code> - A <a href="#throughput_meter">ThroughputMeter</a> of the 3xx
response code</p></li> <li><p><code>responses-4xx</code> - A <a href="#throughput_meter">ThroughputMeter</a> of the 4xx
response code</p></li> <li><p><code>responses-5xx</code> - A <a href="#throughput_meter">ThroughputMeter</a> of the 5xx
response code</p></li> <li><p><code>open-websockets</code> - A <a href="#counter">Counter</a> of the number of open web
socket connections</p></li> <li><p><code>open-websockets.&lt;remote-host&gt;</code> - A <a href="#counter">Counter</a> of the
number of open web socket connections for a particular remote host</p></li></ul> <p>Http URI metrics must be explicitly configured in the options either by
exact match or regex match:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMonitoredHttpServerUris</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;/foo/.*&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;REGEX&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In case if the uri contains some path parameters like <code>/users/:userId</code>
it might not make sense to have a separate entry in the registry for
each user id (like <code>get-requests./users/1</code>, <code>get-requests./users/2</code> and
so on) but a summarized one. To achieve that you can set an alias to the
match instance in this case the alias will be used as a part of the
registry name instead of uri like <code>&lt;http-method&gt;-requests.&lt;alias&gt;</code>. In
addition there will be separate counters for each response group for
each defined alias like <code>responses-&lt;code&gt;.&lt;alias&gt;</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMonitoredHttpServerUris</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;/users/.*&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setAlias</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;REGEX&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>For <code>bytes-read</code> and <code>bytes-written</code> the bytes represent the body of
the request/response, so headers, etc are ignored.</strong></p> <h2 id="http-client-metrics"><a href="#http-client-metrics" class="header-anchor">#</a> Http client metrics</h2> <p>Base name: <code>vertx.http.clients</code> (by default) or
<code>vertx.http.clients.&lt;id&gt;</code> where <code>&lt;id&gt;</code> is a non empty string configured
by <code>setMetricsName</code>.</p> <p>Http client includes all the metrics of a <a href="#http-server-metrics">Http
Server</a> plus the following:</p> <ul><li><p><code>connections.max-pool-size</code> - A <a href="#gauge">Gauge</a> of the max
connection pool size</p></li> <li><p><code>connections.pool-ratio</code> - A ratio <a href="#gauge">Gauge</a> of the open
connections / max connection pool size</p></li> <li><p><code>responses-1xx</code> - A <a href="#meter">Meter</a> of the 1xx response code</p></li> <li><p><code>responses-2xx</code> - A <a href="#meter">Meter</a> of the 2xx response code</p></li> <li><p><code>responses-3xx</code> - A <a href="#meter">Meter</a> of the 3xx response code</p></li> <li><p><code>responses-4xx</code> - A <a href="#meter">Meter</a> of the 4xx response code</p></li> <li><p><code>responses-5xx</code> - A <a href="#meter">Meter</a> of the 5xx response code</p></li></ul> <p>The http client manages a pool of connection for each remote endpoint
with a queue of pending requests</p> <p>Endpoint metrics are available too:</p> <ul><li><p><code>endpoint.&lt;host:port&gt;.queue-delay</code> - A <a href="#timer">Timer</a> of the wait
time of a pending request in the queue</p></li> <li><p><code>endpoint.&lt;host:port&gt;.queue-size</code> - A <a href="#counter">Counter</a> of the
actual queue size</p></li> <li><p><code>endpoint.&lt;host:port&gt;.open-netsockets</code> - A <a href="#counter">Counter</a> of
the actual number of open sockets to the endpoint</p></li> <li><p><code>endpoint.&lt;host:port&gt;.usage</code> - A <a href="#timer">Timer</a> of the delay
between the request starts and the response ends</p></li> <li><p><code>endpoint.&lt;host:port&gt;.in-use</code> - A <a href="#counter">Counter</a> of the actual
number of request/response</p></li> <li><p><code>endpoint.&lt;host:port&gt;.ttfb</code> - A <a href="#timer">Timer</a> of the wait time
between the request ended and its response begins</p></li></ul> <p>where &lt;host&gt; is the endpoint host name possibly unresolved and
&lt;port&gt; the TCP port.</p> <p>The monitored endpoints are configurable via a match performed on the
server <code>$host:$port</code>. The default for this setting is to monitor no
endpoints.</p> <p>The monitored endpoints can be configured in the
<code>DropwizardMetricsOptions</code> via a specific hostname match or a regex
match:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setMonitoredHttpClientEndpoints</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;some-host:80&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Match</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;another-host:.*&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;REGEX&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="net-server-metrics"><a href="#net-server-metrics" class="header-anchor">#</a> Net server metrics</h2> <p>Base name: <code>vertx.net.servers.&lt;host&gt;:&lt;port&gt;</code></p> <ul><li><p><code>open-netsockets</code> - A <a href="#counter">Counter</a> of the number of open net
socket connections</p></li> <li><p><code>open-netsockets.&lt;remote-host&gt;</code> - A <a href="#counter">Counter</a> of the
number of open net socket connections for a particular remote host</p></li> <li><p><code>connections</code> - A <a href="#timer">Timer</a> of a connection and the rate of
it’s occurrence</p></li> <li><p><code>exceptions</code> - A <a href="#counter">Counter</a> of the number of exceptions</p></li> <li><p><code>bytes-read</code> - A <a href="#histogram">Histogram</a> of the number of bytes
read.</p></li> <li><p><code>bytes-written</code> - A <a href="#histogram">Histogram</a> of the number of bytes
written.</p></li></ul> <h2 id="net-client-metrics"><a href="#net-client-metrics" class="header-anchor">#</a> Net client metrics</h2> <p>Base name: <code>vertx.net.clients</code> (by default) or <code>vertx.net.clients.&lt;id&gt;</code>
where <code>&lt;id&gt;</code> is a non empty string configured by <code>setMetricsName</code>.</p> <p>Net client includes all the metrics of a <a href="#net-server-metrics">Net
Server</a></p> <h2 id="datagram-socket-metrics"><a href="#datagram-socket-metrics" class="header-anchor">#</a> Datagram socket metrics</h2> <p>Base name: <code>vertx.datagram</code></p> <ul><li><p><code>sockets</code> - A <a href="#counter">Counter</a> of the number of datagram sockets</p></li> <li><p><code>exceptions</code> - A <a href="#counter">Counter</a> of the number of exceptions</p></li> <li><p><code>bytes-written</code> - A <a href="#histogram">Histogram</a> of the number of bytes
written.</p></li> <li><p><code>&lt;host&gt;:&lt;port&gt;.bytes-read</code> - A <a href="#histogram">Histogram</a> of the number
of bytes read.</p> <ul><li>This metric will only be available if the datagram socket is
listening</li></ul></li></ul> <h2 id="pool-metrics"><a href="#pool-metrics" class="header-anchor">#</a> Pool metrics</h2> <p>Base name: <code>vertx.pools.&lt;type&gt;.&lt;name&gt;</code> where <code>type</code> is the type of the
pool (e.g <em>worker</em>, <em>datasource</em>) and <code>name</code> is the name of the pool
(e.g <code>vert.x-worker-thread</code>).</p> <p>Pools of type <em>worker</em> are blocking worker pools. Vert.x exposes its
worker as <em>vert.x-worker-thread</em> and <em>vert.x-internal-blocking</em>. Named
worker executor created with <code>WorkerExecutor</code> are exposed.</p> <p>Datasource created with Vert.x JDBC clients are exposed as <em>datasource</em>.</p> <ul><li><p><code>queue-delay</code> - A <a href="#timer">Timer</a> measuring the duration of the
delay to obtain the resource, i.e the wait time in the queue</p></li> <li><p><code>queue-size</code> - A <a href="#counter">Counter</a> of the actual number of waiters
in the queue</p></li> <li><p><code>usage</code> - A <a href="#timer">Timer</a> measuring the duration of the usage of
the resource</p></li> <li><p><code>in-use</code> - A <a href="#count">???</a> of the actual number of resources used</p></li> <li><p><code>pool-ratio</code> - A ratio <a href="#gauge">Gauge</a> of the in use resource / pool
size</p></li> <li><p><code>max-pool-size</code> - A <a href="#gauge">Gauge</a> of the max pool size</p></li></ul> <p>The <code>pool-ratio</code> and the <code>max_pool_size</code> won’t be present when the
measured pool’s max pool size could not be determined.</p> <h1 id="jmx"><a href="#jmx" class="header-anchor">#</a> JMX</h1> <p>JMX is disabled by default.</p> <p>If you want JMX, then you need to enabled that:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If running Vert.x from the command line you can enable metrics and JMX
by uncommented the JMX_OPTS line in the <code>vertx</code> or <code>vertx.bat</code> script:</p> <div class="language- extra-class"><pre><code>JMX_OPTS=&quot;-Dcom.sun.management.jmxremote -Dvertx.metrics.options.jmxEnabled=true&quot;
</code></pre></div><p>You can configure the domain under which the MBeans will be created:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxDomain</span><span class="token punctuation">(</span><span class="token string">&quot;mydomain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In the command line, just append the following system properties to your
application (works for the <code>vertx</code> cli and fat jars):</p> <div class="language- extra-class"><pre><code>-Dvertx.metrics.options.jmxEnabled=true -Dvertx.metrics.options.jmxDomain=vertx
</code></pre></div><h1 id="enabling-remote-jmx"><a href="#enabling-remote-jmx" class="header-anchor">#</a> Enabling remote JMX</h1> <p>If you want the metrics to be exposed remotely over JMX, then you need
to set, at minimum the following system property:</p> <p><code>com.sun.management.jmxremote</code></p> <p>If running from the command line this can be done by editing the <code>vertx</code>
or <code>vertx.bat</code> and uncommenting the <code>JMX_OPTS</code> line.</p> <p>Please see the <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html" target="_blank" rel="noopener noreferrer">Oracle JMX
documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
for more information on configuring JMX</p> <p><strong>If running Vert.x on a public server please be careful about exposing
remote JMX access</strong></p> <h1 id="accessing-dropwizard-registry"><a href="#accessing-dropwizard-registry" class="header-anchor">#</a> Accessing Dropwizard Registry</h1> <p>When configuring the metrics service, an optional registry name can be
specified for registering the underlying <a href="https://dropwizard.github.io/metrics/3.1.0/getting-started/#the-registry" target="_blank" rel="noopener noreferrer">Dropwizard
Registry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
in the the <a href="https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/SharedMetricRegistries.html" target="_blank" rel="noopener noreferrer">Dropwizard Shared
Registry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
so you can retrieve this registry and use according to your needs.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setRegistryName</span><span class="token punctuation">(</span><span class="token string">&quot;my-registry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the registry</span>
<span class="token keyword">let</span> registry <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.codahale.metrics.SharedMetricRegistries&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOrCreate</span><span class="token punctuation">(</span><span class="token string">&quot;my-registry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Do whatever you need with the registry</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="using-already-existing-dropwizard-registry"><a href="#using-already-existing-dropwizard-registry" class="header-anchor">#</a> Using already existing Dropwizard Registry</h1> <p>Optionally, it is possible to utilize already existing <a href="https://dropwizard.github.io/metrics/3.1.0/getting-started/#the-registry" target="_blank" rel="noopener noreferrer">Dropwizard
Registry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
In order to do so pass <code>MetricRegistry</code> instance as parameter for
<code>setMetricRegistry</code> function in <code>VertxOptions</code> object.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MetricRegistry</span> metricRegistry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetricRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">VertxOptions</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span>
   <span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMetricRegistry</span><span class="token punctuation">(</span>metricRegistry<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Vertx</span> vertx <span class="token operator">=</span> <span class="token class-name">Vertx</span><span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="using-jolokia-and-hawtio"><a href="#using-jolokia-and-hawtio" class="header-anchor">#</a> Using Jolokia and Hawtio</h1> <p><a href="https://jolokia.org/" target="_blank" rel="noopener noreferrer">Jolokia<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a JMX-HTTP bridge giving an
alternative to JSR-160 connectors. It is an agent based approach with
support for many platforms. In addition to basic JMX operations it
enhances JMX remoting with features like bulk requests.</p> <p><a href="http://hawt.io/" target="_blank" rel="noopener noreferrer">Hawtio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a modular web console consuming the data
exposed by Jolokia. It lets you create dashboards and retrieve data from
JMX such as memory, cpu, or any vert.x metrics.</p> <p>This section explains how to configure your vert.x application to
retrieve the metrics in Hawtio.</p> <p>First, you need to configure your vert.x instance with the following
options:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Vertx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vertx/core&quot;</span>
<span class="token keyword">let</span> vertx <span class="token operator">=</span> Vertx<span class="token punctuation">.</span><span class="token function">vertx</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VertxOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setMetricsOptions</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropwizardMetricsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setJmxDomain</span><span class="token punctuation">(</span><span class="token string">&quot;vertx-metrics&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can change the domain to whatever you want. The same configuration
can be used for clustered Vert.x instances. This configuration instructs
vertx-dropwizard-metrics to expose the metrics in the local MBean
server, so Jolokia can retrieve them.</p> <p>Then you need, to <em>plug</em> jolokia to expose the data. There are several
ways to <em>plug</em> jolokia. See <a href="https://jolokia.org/reference/html/architecture.html" target="_blank" rel="noopener noreferrer">for further
details<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Here, we
explain how to use the Jolokia agent with the default configuration.
Refer to the <a href="https://jolokia.org/reference/html/" target="_blank" rel="noopener noreferrer">the jolokia
documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to configure it.</p> <p>The agent can either be attached when you start the application or
attached on a running JVM (you would need special permission to access
the process). In the first case, launch you application using:</p> <div class="language- extra-class"><pre><code>java -javaagent:/.../agents/jolokia-jvm.jar=port=7777,host=localhost -jar ...
</code></pre></div><p>The <code>-javaagent</code> specifies the path to the jolokia agent jar file. You
can configure the port and host from the command line. Here it registers
the REST endpoint on <code>http://localhost:7777</code>.</p> <p>You can also attach the agent on a running JVM with:</p> <div class="language- extra-class"><pre><code>java -jar jolokia-jvm.jar start PID
</code></pre></div><p>Replace <code>PID</code> with the process id of the JVM.</p> <p>Once Jolokia is configured and launched, you can consume the data from
Hawtio.</p> <p>On Hawtio, enter the connection details as follows:</p> <p><img src="/es4x/assets/img/hawtio-connect.3d2e1936.png" alt="hawtio connect"></p> <p>Then, you can go to the <em>JMX</em> tab and you should find a <em>directory</em> with
the name you entered as JMX domain in the Vert.x configuration:</p> <p><img src="/es4x/assets/img/hawtio-jmx.b1049635.png" alt="hawtio jmx"></p> <p>From this, you can configure your dashboard and retrieve any metric
exposed by vert.x.</p> <h1 id="using-jolokia-and-jmx4perl-to-expose-metrics-to-nagios"><a href="#using-jolokia-and-jmx4perl-to-expose-metrics-to-nagios" class="header-anchor">#</a> Using Jolokia and JMX4Perl to expose metrics to Nagios</h1> <p><a href="http://search.cpan.org/~roland/jmx4perl/scripts/check_jmx4perl" target="_blank" rel="noopener noreferrer">Check_jmx4perl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
is a Nagios plugin using jmx4perl for accessing JMX data remotely. It
lets you expose the Vert.x metrics to Nagios.</p> <p>First you need to start your application with the Jolokia JVM agent
attached to it. There are several ways to attach jolokia. See <a href="https://jolokia.org/reference/html/architecture.html" target="_blank" rel="noopener noreferrer">for
further details<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
Here, we explain how to use the Jolokia agent with the default
configuration. Refer to the <a href="https://jolokia.org/reference/html/" target="_blank" rel="noopener noreferrer">the jolokia
documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to configure it.</p> <p>The agent can either be attached when you start the application or
attached on a running JVM (you would need special permission to access
the process). In the first case, launch you application using:</p> <div class="language- extra-class"><pre><code>java -javaagent:/.../agents/jolokia-jvm.jar=port=7777,host=localhost -jar ...
</code></pre></div><p>The <code>-javaagent</code> specifies the path to the jolokia agent jar file. You
can configure the port and host from the command line. Here it registers
the REST endpoint on <code>http://localhost:7777</code>.</p> <p>You can also attach the agent on a running JVM with:</p> <div class="language- extra-class"><pre><code>java -jar jolokia-jvm.jar start PID
</code></pre></div><p>Replace <code>PID</code> with the process id of the JVM.</p> <p>Once Jolokia is started, you can configure your Nagios check such as:</p> <div class="language- extra-class"><pre><code>check_jmx4perl --url http://10.0.2.2:8778/jolokia --name eventloops --mbean vertx:name=vertx.event-loop-size
--attribute Value --warning 4
</code></pre></div><p>Check <a href="http://search.cpan.org/~roland/jmx4perl/scripts/check_jmx4perl" target="_blank" rel="noopener noreferrer">check_jmx4perl
documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
to get more details about check configuration.</p> <h1 id="metrics-commands-via-telnet-or-ssh-in-vert-x-shell-service"><a href="#metrics-commands-via-telnet-or-ssh-in-vert-x-shell-service" class="header-anchor">#</a> Metrics commands via Telnet or SSH in Vert.x Shell service</h1> <p>To find out the available metrics commands you can use the <em>help</em>
builtin command:</p> <ul><li><p>Available commands</p> <ol><li><p>metrics-ls: List the known metrics for the current Vert.x
instance</p></li> <li><p>metrics-info: Show metrics info for the current Vert.x instance
in JSON format</p></li> <li><p>metrics-histogram: Show histogram metrics table for the current
Vert.x instance in real time</p></li></ol></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/reactiverse/es4x/edit/develop/docs/manual/@vertx/dropwizard-metrics/index.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/30/2020, 11:09:36 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/es4x/assets/js/app.cfb14a02.js" defer></script><script src="/es4x/assets/js/2.96613d0f.js" defer></script><script src="/es4x/assets/js/8.3d81d937.js" defer></script>
  </body>
</html>
